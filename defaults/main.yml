---
# The list of the packages managed by this role
beats:
  - filebeat
  - topbeat

# The installation state of the beats packages, passed to the appropriate
# packaging module (yum/apt) as the 'state'.
# Set to 'present' to install, 'latest' to upgrade and 'absent' to remove.
beats_package:
  - { 'name': 'filebeat', 'state': 'present' }
  - { 'name': 'topbeat', 'state': 'present' }

# Repository url
beats_repository_url: "https://packages.elastic.co/"

# GPG key url
beats_repository_gpg_key_url: "https://packages.elastic.co/GPG-KEY-elasticsearch"

# Download specific versions of beats from this url (instead of install from repo).
# You can set here a specific url to download the beats packages directly from.
beats_download_url: "https://artifacts.elastic.co/downloads/beats"

# List of specific beats version you want to download from beats_download_url.
# beats_download:
#   - { "name": "filebeat", "version": "5.0.0", "state": "latest" }
#   - { "name": "topbeat", "version": "5.0.0", "state": "latest" }

# Restart beats every hour
beats_restart_filebeat: false
beats_restart_topbeat: false

# Trace beats open files every hour
beats_trace_filebeat: false
beats_trace_topbeat: false

# Location of beats configurations loaded by the init script
beats_init_config_directory: "/etc/sysconfig"

# Environment variable to set, they will be available in your beats configuration files
# beats_environment:
#  - { "name": "filebeat", "state": "present", "line": "FB_ENV=$(echo \"test\")" }

# list of host entries to add to or remove from /etc/hosts on beats servers.
# Set state to 'present' to add a line, or 'absent' to remove it.
# beats_hosts:
#   - { "line": "127.0.0.1 localhost elk sample", "state": "absent" }

# The contents of this variable will be placed into the `beats_ca_path`
# This should either be set to a string containing your CA certificate or
# use a lookup plugin to retrieve it.
#  ex:
#   beats_ca_cert: "{{ lookup('file', '/path/to/ca.crt') }}"
beats_ca_cert: null

# Path to which the above certificate will be uploaded
beats_ca_path: /etc/pki/tls/certs/beats.crt

# `beats_config_filebeat_*` are templated directly into filebeat.yml for the config.
# See https://github.com/elastic/filebeat/blob/master/etc/filebeat.yml for
# an exhaustive list of configurations.
beats_config_filebeat_filebeat:
  filebeat:
    prospectors:
      - paths:
        - /var/log/*.log
beats_config_filebeat_output:
  output:
    file:
      path: /tmp/filebeat
      filename: filebeat.out
beats_config_filebeat_logging:
  logging:
    to_syslog: true
    level: error
beats_config_filebeat_shipper:
  shipper:

# `beats_config_topbeat_*` are templated directly into topbeat.yml for the config.
# See https://github.com/elastic/topbeat/blob/master/etc/topbeat.yml for
# an exhaustive list of configurations.
beats_config_topbeat_input:
  input:
    procs: [".*"]
    stats: 
      system: true
      process: true
      filesystem: true
      cpu_per_core: false
beats_config_topbeat_output:
  output:
    file:
      path: /tmp/topbeat
      filename: topbeat.out
beats_config_topbeat_logging:
  logging:
    to_syslog: true
    level: error
beats_config_topbeat_shipper:
  shipper:

